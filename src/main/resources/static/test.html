<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript"
            src="https://api.map.baidu.com/api?v=3.0&ak=yxRvk9p5t0NawsafBGsNoEH6otd165la"></script>

</head>
<body>
<div id="allmap"></div>
<input type="text" placeholder="经纬度" name="longitude" id="longitude"/>
<input type="text" placeholder="位置" name="position" id="position"/>
<button onclick="getLocation()">获取位置信息</button>
</body>
<script type="text/javascript">

    function getLocation() {
        var map = new BMap.Map("allmap");
        var point = new BMap.Point(116.331398, 39.897445);
        map.centerAndZoom(point, 12);
        var geolocation = new BMap.Geolocation();
        //创建地理编码器
        var gc = new BMap.Geocoder();
        geolocation.getCurrentPosition(function (r) {
            if (this.getStatus() == BMAP_STATUS_SUCCESS) {
                var mk = new BMap.Marker(r.point);
                map.addOverlay(mk);
                map.panTo(r.point);
                alert('您的位置经纬度：' + r.point.lng.toFixed(6) + ',' + r.point.lat.toFixed(6));
                gc.getLocation(r.point, function (rs) {
                    var addComp = rs.addressComponents;
                    //alert(addComp.city);
                    alert(addComp.province + addComp.city + addComp.district + addComp.street + addComp.streetNumber);

                });
            }
            else {
                // alert('failed'+this.getStatus());
                alert("自动定位失败，请手动填写位置信息！")
            }
        });
    }
</script>
</html>